LEKCJA 1.
1.
CREATE TABLE postac (id_postaci INT PRIMARY KEY auto_increment, nazwa VARCHAR(40), rodzaj ENUM('wiking','ptak','kobieta'), data_ur DATE, wiek INT UNSIGNED);
INSERT INTO postac VALUES (NULL, 'Bjorn', 'wiking', '1990-01-10', '30');
CREATE TABLE postac VALUES (NULL, 'Drozd', 'ptak', NULL, '1');
CREATE TABLE postac VALUES (NULL, 'Tesciowa', 'kobieta', '1932-03-13', '80');
UPDATE postac SET wiek=88 WHERE nazwa = 'Tesciowa';
_____________________________________________________
2.
CREATE TABLE walizka (id_walizki INT auto_increment PRIMARY KEY, pojemnosc INT UNSIGNED, kolor ENUM('rozowy','czerwony','teczowy','zolty'), id_wlasciciela INT, FOREIGN KEY (id_wlasciciela) REFERENCES postac (id_postaci));
ALTER TABLE walizka DROP FOREIGN KEY walizka_ibfk_1;
ALTER TABLE walizka ADD FOREIGN KEY (id_wlasciciela) REFERENCES postac (id_postaci) ON DELETE CASCADE;
ALTER TABLE walizka ALTER kolor set DEFAULT 'rozowy';
INSERT INTO walizka VALUES (DEFAULT, 30, 'czerwony', 1);
INSERT INTO walizka VALUES (DEFAULT, 30, DEFAULT, 2);
_____________________________________________________
3.
CREATE TABLE izba (adres_budynku VARCHAR(50), nazwa_izby VARCHAR(40), metraz INT UNSIGNED, wlasciciel INT, PRIMARY KEY (adres_budynku, nazwa_izby), FOREIGN KEY (wlasciciel) REFERENCES postac(id_postaci) ON DELETE SET NULL);
ALTER TABLE izba ADD kolor_izby VARCHAR(40) DEFAULT 'czarny' AFTER metraz;
INSERT INTO izba VALUES ('Lesna 8', 'Spizarnia', 15, DEFAULT, 1);
_____________________________________________________
4.
CREATE TABLE przetwory (id_przetworu INT PRIMARY KEY auto_increment, rok_produkcji INT DEFAULT 1654, id_wykonawcy INT, zawartosc VARCHAR(70), dodatek VARCHAR(70) DEFAULT 'papryczka chilli', id_konsumenta INT, FOREIGN KEY (id_wykonawcy) REFERENCES postac(id_postaci), FOREIGN KEY (id_konsumenta) REFERENCES postac(id_postaci));
INSERT INTO przetwory VALUES (NULL, DEFAULT, 1, 'bigos', DEFAULT, 3);
_____________________________________________________
5.
INSERT INTO postac VALUES (DEFAULT, 'Elrend', 'wiking', '1970-05-12', '50');
INSERT INTO postac VALUES (NULL, 'Gunnar', 'wiking', '1975-07-17', '45');
INSERT INTO postac VALUES (NULL, 'Hjorvarth', 'wiking', '1969-12-09', '50');
INSERT INTO postac VALUES (NULL, 'Mord', 'wiking', '1980-04-10', '40');
INSERT INTO postac VALUES (NULL, 'Sigurd', 'wiking', '1977-02-03', '23');
CREATE TABLE statek (nazwa_statku varchar(50) PRIMARY KEY, rodzaj_statku ENUM('drakkar', 'langskip', 'sneka'), data_wodowania DATE, max_ladownosc DECIMAL(10,2) UNSIGNED);
INSERT INTO statek VALUES ('Smok','drakkar','2005-05-10', 200);
INSERT INTO statek VALUES ('Orzel','langskip','2006-05-10', 500);
ALTER TABLE postac ADD funkcja VARCHAR(40);
UPDATE postac SET funkcja='kapitan' WHERE id_postaci=1;
ALTER TABLE postac ADD statek VARCHAR(40);
ALTER TABLE postac add FOREIGN KEY (statek) REFERENCES statek (nazwa_statku);
UPDATE postac SET statek='Orzel' WHERE nazwa = 'Elrend';
UPDATE postac SET statek='Orzel' WHERE nazwa = 'Gunnar';
UPDATE postac SET statek='Orzel' WHERE nazwa = 'Hjorvarth';
UPDATE postac SET statek='Smok' WHERE nazwa = 'Mord';
UPDATE postac SET statek='Smok' WHERE nazwa = 'Sigurd';
UPDATE postac SET statek='Smok' WHERE nazwa = 'Bjorn';
UPDATE postac SET statek='Smok' WHERE nazwa = 'Drozd';
DELETE FROM izba WHERE nazwa_izby='Spizarnia';
DROP TABLE izba;